{% extends "base.html" %}

{% block titulo %}Panel Admin · BUWERBUNG{% endblock %}

{% block contenido %}

<div class="bw-admin-layout">

  <!-- Sidebar -->
  <aside class="bw-admin-sidebar">
    <h2>ADMIN</h2>
    <a href="/admin">Ver alumnos</a>
    <a href="/admin/reportes">Ver reportes parciales</a>
    <a href="/admin/nuevo_usuario">Registrar nuevo usuario</a>
    <a href="/logout">Cerrar sesión</a>
  </aside>

  <!-- Contenido principal -->
  <section class="bw-admin-content">
    <h1>Panel de Administración</h1>
    <p class="bw-text-muted">
      Listado de alumnos registrados en el sistema. Desde aquí puedes consultar, editar o eliminar registros.
    </p>

    <!-- Buscador -->
    <form method="POST" action="/admin" class="bw-search-form">
      <input type="text" name="busqueda" placeholder="Buscar por nombre o CURP" required>
      <button type="submit">Buscar</button>
    </form>

    <!-- Tabla de alumnos -->
    {% if usuarios %}
    <div class="bw-table-wrapper">
      <table class="bw-table">
        <thead>
          <tr>
            <th>Nombre completo</th>
            <th>CURP</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
        {% for alumno in usuarios %}
          <tr>
            <td>{{ alumno.nombres }} {{ alumno.apellido_paterno }} {{ alumno.apellido_materno }}</td>
            <td>{{ alumno.curp }}</td>
            <td>
              <a class="bw-link" href="/admin/alumno/{{ alumno.curp }}">Ver</a> |
              <a class="bw-link" href="/admin/alumno/{{ alumno.curp }}/editar">Editar</a> |
              <a class="bw-link bw-link-danger" href="/admin/alumno/{{ alumno.curp }}/eliminar"
                 onclick="return confirm('¿Seguro que deseas eliminar este alumno?');">
                Eliminar
              </a>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
      <p>No se encontraron alumnos.</p>
    {% endif %}
  </section>
</div>

{% endblock %}
